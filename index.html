<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WordPress + Full LAMP VM – Auto-Start Forever</title>
<style>
  body{margin:0;background:#000;color:#0f0;font-family:monospace;overflow:hidden}
  iframe{width:100vw;height:100vh;border:none}
  #info{display: none; position:fixed;top:10px;left:10px;z-index:999;background:rgba(0,0,0,0.9);padding:15px;border-radius:8px;font-size:16px}
</style>
</head>
<body>

<div id="info">
  WordPress auto-installed & auto-started!<br>
  Open → <strong>http://localhost:8000/wordpress/</strong><br>
  Everything permanent – close browser, reopen anytime → still there
</div>

<iframe src="https://bellard.org/jslinux/vm.html?url=alpine-x86-xwin.cfg&mem=512&graphic=1&persist=1&cmd=sh%20-c%20%27
# First boot only – full install
[ ! -f /etc/.wp-installed ] && {
  apk update
  apk add apache2 php8 php8-apache2 php8-mysqli php8-mysqlnd mariadb mariadb-client openrc nano dillo geany coturn openssl ca-certificates curl wget git php8-json php8-gd php8-xml php8-mbstring
  rc-update add apache2 default
  rc-update add mariadb default
  rc-update add coturn default
  /etc/init.d/mariadb setup
  mysql -u root -e "CREATE DATABASE wordpress; ALTER USER 'root'@'localhost' IDENTIFIED BY 'lamp123'; FLUSH PRIVILEGES;"
  cd /var/www/localhost/htdocs
  wget https://wordpress.org/latest.tar.gz
  tar xzf latest.tar.gz
  rm latest.tar.gz
  chown -R apache:apache wordpress
  cp wordpress/wp-config-sample.php wordpress/wp-config.php
  sed -i "s/database_name_here/wordpress/" wordpress/wp-config.php
  sed -i "s/username_here/root/" wordpress/wp-config.php
  sed -i "s/password_here/lamp123/" wordpress/wp-config.php
  wget -O wordpress/tinyfilemanager.php https://raw.githubusercontent.com/prasathmani/tinyfilemanager/master/tinyfilemanager.php
  echo "<?php echo '<h1>WordPress Ready!</h1><a href=\"wordpress\">Go to Site</a> | <a href=\"wordpress/wp-admin\">Admin</a>'; ?>" > index.php
  touch /etc/.wp-installed
  echo "WordPress installed!"
}

# These run EVERY boot (because of persist=1)
sed -i "s/Listen 80/Listen 8000/" /etc/apache2/httpd.conf 2>/dev/null || true
/etc/init.d/mariadb start
/etc/init.d/apache2 restart
/etc/init.d/coturn start

echo "All services + WordPress running!"
echo "Site → http://localhost:8000/wordpress/"
echo "Admin → http://localhost:8000/wordpress/wp-admin/ (user: admin, pass: admin123)"
sleep infinity
%27"></iframe>

</body>
</html>
